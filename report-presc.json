{
    "file_info": { 
        "filename":"{Data->Patient->lastname}_{Data->Patient->firstname}_{Data->Patient->mi}_{Data->Patient->chart}_{CurrentDateTime}",
        "paper_size": "A4", 
        "units": "mm", 
        "orientation": "P" 
    },
    "metadata": [ 
        "SetAuthor('Xtract Solutions')",
        "SetTitle('ALLERGY PRESCRIPTION MIX RECEIPT')",
        "SetSubject('A report of {data->Patient->firstname} {data->Patient->lastname}'s injections on {data->report_date->date}')"
    ],
    "header": [ 
        "Image('./public/assets/images/logo.png',150,5,50)",
        "SetXY(15,{GetY})",
        "SetFont('Arial','',18)", 
        "Write(10,'ALLERGY PRESCRIPTION MIX RECEIPT')",
        "Ln()",
        "FontAwesome('fas','f007',10)", 
        "SetXY(15,{GetY})",
        "Template('patient_line')", 
        "FontAwesome('fas','f073',10)",
        "SetXY(16,{GetY})", 
        "SetFont('Arial','',10)",
        "Write(5,'Visit: {Data->Report_date}')",
        "Ln()",
        "FontAwesome('fas','f3c5',10)",
        "SetFont('Arial','',10)",
        "SetXY(15,{GetY})",
        "Write(5,'{Data->TreatmentSet->prescription->provider->addr1} {Data->TreatmentSet->prescription->provider->addr2}, {Data->TreatmentSet->prescription->provider->city} {Data->TreatmentSet->prescription->provider->state} {Data->TreatmentSet->prescription->provider->zip}')",
        "SetDrawColor(0,100,250)",
        "SetLineWidth(.3)",
        "Line(25,{GetY+10},190,{GetY+10})",
        "SetXY({GetX},25)"
    ],
    "footer": [
      "SetXY(20,-27)",
      "SetFont('Arial','',10)",
      "Template('patient_line')",
      "SetXY(160,270)",
      "Write(5,'Page {PageNo} of {TotalPages}')"
    ],
    "body": [ 
        "Template('providers')",
        "Template('prescription',{Data->TreatmentSet})"
    ],
    "providers": [
        "SetXY(15,{GetY+10})",
        "SetFont('Arial','',18)",
        "Write(30,'Prescription Overview')",
        "Ln()",
        "SetXY(17,{GetY-10})",
        "FontAwesome('fas','f0f1',12)",
        "SetXY(25,{GetY-2})",
        "SetFont('Arial','',10)",
        "Write(6,'Prescribing provider: {Data->TreatmentSet->prescription->provider->display_name}')",
        "Ln()",
        "SetXY(25,{GetY})",
        "Write(6,'Signed {Data->TreatmentSet->prescription->created_at} by {Data->TreatmentSet->prescription->provider->display_name}')",
        "Ln()",

        "SetXY(17,{GetY+2})",
        "FontAwesome('fas','f46d',12)",
        "SetXY(25,{GetY-12})",
        "SetFont('Arial','B',10)",
        "Write(30,'Reason for Prescription')",
        
        "Ln()",
        "SetXY(25,{GetY-25})",
        "SetFont('Arial','',10)",
        "Write(30,'Allergy immunotherapy treatment of')",
        "Ln()",
        "SetXY(27,{GetY-25})",
        "SetFont('Arial','',10)",
        "Write(30,'J30.1 - allergic rhinitis due to pollen')",
        "Ln()",
        "SetXY(27,{GetY-25})",
        "SetFont('Arial','',10)",
        "Write(30,'J30.1 - allergic rhinitis due to animal dander')",
        "Ln()",

        "SetXY(17,{GetY-10})",
        "FontAwesome('fas','f5a7',12)",

        "SetXY(25,{GetY-12})",
        "SetFont('Arial','B',10)",
        "Write(30,'Mixed by')",
        "SetFont('Arial','',10)",
        "Write(30,' Luke Barrat')",
        "Ln()",
        "SetXY(25,{GetY-25})",
        "SetFont('Arial','B',10)",
        "Write(30,'Mixed on')",
        "SetFont('Arial','',10)",
        "Write(30,' {Data->vial[0]->vials[0]->mix_date}')",
        "Ln()",
        "SetXY(25,{GetY-25})",
        "SetFont('Arial','B',10)",
        "Write(30,'Expiration')",
        "SetFont('Arial','',10)",
        "Write(30,' 09/01/2019')",
        "Ln()",
        "SetXY(150,{GetY-30})",
        "FontAwesome('fas','f02a',50)"

    ],
    "prescription": [
        "SetXY(15,{GetY+15})",
        "SetFont('Arial','',16)",
        "SetLineWidth(.1)",
        "Line(25,{GetY+10},190,{GetY+10})",
        "Template('prescription_details',{Data})"
    ],
    "prescription_details": [
        "SetXY(17,{GetY+15})",
        "FontAwesome('fal','f486',12)",
        "SetXY(25,{GetY})",
        "SetFont('Arial','B',10)",
        "Write(6,'Prescription ID : #{Data->prescription->prescription_number}')",
        "Ln()",
        "SetXY(25,{GetY})",
        "Write(6,'Bottle name: {Data->vials[0]->name}')",
        "Ln()",
        "SetXY(25,{GetY})",
        "Write(6,'Dosing plan: {Data->prescription->treatment_plan->name}')",
        "Ln()",
        "SetXY(25,{GetY})",
        "Write(6,'Vial size: {Data->vials[0]->size}')",
        "Template('dilutions_circles', {Data->vials})",
        "Template('extracts', {Data->vials[0]})",
        "Template('diluents', {Data->vials[0]})"
    ],
    "dilutions_circles": [
        "SetFont('Arial','',7)",
        "SetFillColor({Data->color})",
        "Text({GetX+45},{GetY-12},'1:{Data->dilution}')",
        "Circle({GetX+50},{GetY-6},5,'FD')",
        "SetFillColor(0,0,0)",
        "SetX({GetX+12})"
    ],
    "extracts": [
        "Ln()",
        "Ln()",
        "SetX(17)",
        "SetFont('Arial','B',10)",
        "DashedRect({GetX},{GetY},{GetX+185},{GetY+6},.25,70)",
        "SetX(17)",
        "MultiCell(55,6,'Extract')",
        "MultiCell(30,6,'Dose (at 1:1) ')",
        "MultiCell(30,6,'Dilution')",
        "MultiCell(20,6,'Units')",
        "MultiCell(20,6,'Lot #')",
        "MultiCell(30,6,'Outdate')",
        "Ln()",
        "Template('extract',{Data->vials})"
    ],
    "extract": [
        "SetX(17)",
        "SetFont('Arial','',10)",
        "MultiCell(55,6,'{Data->inventory->extract->name}', 1)",
        "MultiCell(30,6,'{Data->dosing->dose}', 1)",
        "MultiCell(30,6,'{Data->inventory->extract->dilution}', 1)",
        "MultiCell(20,6,'{Data->inventory->extract->unit_type->name}', 1)",
        "MultiCell(20,6,'{Data->inventory->lot_number}', 1)",
        "MultiCell(30,6,'{Data->inventory->out_date}', 1)",
        "SetFont('Arial','',10)",
        "Ln()"
    ],
    "diluents": [
        "Ln()",
        "SetX(17)",
        "SetFont('Arial','B',10)",
        "SetX(17)",
        "MultiCell(55,6,'Diluents')",
        "MultiCell(30,6,' ')",
        "Ln()",
        "Template('diluent',{Data->vials})"
    ],
    "diluent": [
        "SetX(17)",
        "SetFont('Arial','',10)",
        "MultiCell(55,6,'{Data->inventory->extract->name}', 1)",
        "MultiCell(30,6,'{Data->dosing->dose}', 1)",
        "SetFont('Arial','',10)",
        "Ln()"
    ],
    "patient_line": [
        "SetFont('Arial','B',10)",
        "Write(5, '{Data->Patient->firstname} {Data->Patient->mi}. {Data->Patient->lastname}')",
        "SetFont('Arial','',10)",
        "SetTextColor(0,100,250)",
        "Write(5,' | ')",
        "SetTextColor(0,0,0)",
        "Write(5,'DOB: {Data->Patient->dob}')",
        "SetTextColor(0,100,250)",
        "Write(5,' | ')",
        "SetTextColor(0,0,0)",
        "Write(5,'MRN: {Data->Patient->chart}')",
        "Ln()"
    ]
}